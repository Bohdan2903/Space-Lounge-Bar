(this["webpackJsonpyalantis-test"]=this["webpackJsonpyalantis-test"]||[]).push([[0],{79:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var r,c=n(22),a=n(15),i=n(8),o=n(44),s=n(10),l=(n(45),n(48)),u=n(32),d=n(46),j=n(25),b=n(13);!function(e){e.GET_EMPLOYERS="GET_EMPLOYERS",e.SET_EMPLOYERS="SET_EMPLOYERS"}(r||(r={}));var h,v,O=(h={lang:"en",employers:null},v=Object(j.a)({},r.SET_EMPLOYERS,(function(e,t){return Object(b.a)(Object(b.a)({},e),{},{employers:t.payload})})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;return v.hasOwnProperty(t.type)?v[t.type](e,t):e}),p=n(14),m=n.n(p),f=n(27),y=n(17),x=n(47),E=n.n(x).a.create({baseURL:"https://yalantis-react-school-api.yalantis.com/api/task0"}),g=function(e){var t=e.method,n=void 0===t?"GET":t,r=e.url,c=void 0===r?"":r,a=e.data,i=void 0===a?{}:a;return E.request({method:n,url:c,data:i,headers:{"Content-Type":"application/json",cache:"no-cache"}}).then((function(e){return e})).catch((function(e){return e.response}))},k=m.a.mark(S);function S(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.d)(r.GET_EMPLOYERS,m.a.mark((function e(t){var n,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g({url:"/users"});case 3:return n=e.sent,c=n.data,e.next=7,Object(y.c)({type:r.SET_EMPLOYERS,payload:c});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));case 2:case"end":return e.stop()}}),k)}var w=[Object(y.b)(S)],N=m.a.mark(M);function M(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.a)(Object(f.a)(w));case 2:case"end":return e.stop()}}),N)}var L=Object(l.a)(),R={key:"root",version:1,storage:o,blacklist:[]},P=(Object(i.a)(),Object(s.applyMiddleware)(L));var T=Object(u.a)(R,Object(s.combineReducers)({common:O,routerReducer:d.routerReducer})),Y=Object(s.createStore)(T,P),D=n(20),_=n(6),G=n(3),A=function(){return Object(G.jsxs)("div",{className:"wrapper",children:[Object(G.jsx)("h1",{children:"Home"}),Object(G.jsx)("p",{children:"Welcome home!"}),Object(G.jsx)(a.b,{to:"/employees",children:"Go to employees page"})]})},C=n(21),J=n(1),I=function(e){var t=e.letter,n=e.children,r=e.setActiveEmployers,c=e.activeEmployers,a=e.sortedActiveEmployees,i=Object(J.useState)(n),o=Object(C.a)(i,2),s=o[0],l=o[1],u=function(e){var t=e.target.name,n=e.target.dataset.index,a=e.target.dataset.birthday,i=null===c||void 0===c?void 0:c.some((function(e){return e.key===n}));if("true"===e.target.value){var o={key:n,name:t,birthday:a,active:!0},s=[].concat(Object(f.a)(c),[o]);!i&&r(s)}else{var l=c.filter((function(e){return e.key!==n}));r(l)}},d=null===s||void 0===s?void 0:s.reduce((function(e,t){var n,r;(null===(n=Object.keys(a))||void 0===n?void 0:n.length)>0?null===(r=Object.keys(a))||void 0===r||r.map((function(n){var r;(null===(r=a[n].children)||void 0===r?void 0:r.some((function(e){return e.key===t.id})))?e[t]=Object(b.a)(Object(b.a)({},t),{},{active:!0}):e[t]=Object(b.a)({},t)})):e[t]=Object(b.a)(Object(b.a)({},t),{},{active:!1});return e.push(e[t]),e}),[]);return Object(J.useMemo)((function(){return l(d)}),[c,a]),Object(G.jsxs)("div",{className:"employer-info-wrapper",children:[Object(G.jsx)("h2",{children:t}),null===s||void 0===s?void 0:s.map((function(e){var t=e.id,n=e.firstName,r=e.lastName,c=e.dob,a=e.active,i="".concat(r," ").concat(n);return Object(G.jsxs)("div",{className:"employer-info",children:[Object(G.jsx)("p",{"data-index":t,className:a?"active":"",children:i}),Object(G.jsxs)("label",{htmlFor:"",children:[Object(G.jsx)("input",{type:"radio",value:"false","data-index":t,name:i,"data-birthday":c,checked:!a,onChange:u}),"Not active"]}),Object(G.jsxs)("label",{htmlFor:"",children:[Object(G.jsx)("input",{type:"radio",value:"true","data-index":t,checked:a,"data-birthday":c,name:i,onChange:u}),"Active"]})]},t)})),!s||(null===s||void 0===s?void 0:s.length)<=0&&Object(G.jsx)("h3",{children:"-"})]},t)},B=function(){var e,t,n,c,a=Object(D.b)(),i=Object(D.c)((function(e){return e.common.employers})),o=Object(J.useState)([]),s=Object(C.a)(o,2),l=s[0],u=s[1],d=Object(J.useState)({}),j=Object(C.a)(d,2),h=j[0],v=j[1];Object(J.useEffect)((function(){a({type:r.GET_EMPLOYERS})}),[]),Object(J.useEffect)((function(){var e=localStorage.getItem("activeEmployers");if(e&&Object.keys(e).length>0){var t=e&&JSON.parse(e);return v(t)}}),[]);var O=null===i||void 0===i?void 0:i.sort((function(e,t){return e.lastName.localeCompare(t.lastName)})).reduce((function(e,t){return e[t]=Object(b.a)({letter:t.lastName.substr(0,1)},t),e.push(e[t]),e}),[]),p="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("").reduce((function(e,t){return e[t]=t,e}),{}),m=Object(J.useMemo)((function(){return(null===O||void 0===O?void 0:O.length)>0&&function(e){if((null===e||void 0===e?void 0:e.length)>0)return Object.keys(p).reduce((function(t,n){var r=[];return e.map((function(e){return-1!==e.letter.indexOf(n)&&r.push(e),t[n]={children:r}})),t}),{})}(O)}),[O]);return Object(J.useMemo)((function(){return v(function(e){return[1,2,3,4,5,6,7,8,9,10,11,12].reduce((function(t,n){var r=[];return(null===e||void 0===e?void 0:e.length)>0&&(null===e||void 0===e||e.map((function(e){var c=e.key,a=e.name,i=e.birthday,o=e.active,s=new Date(i).getMonth()+1;+n===s&&(r.push({key:c,name:a,birthday:i,active:o}),t[n]={key:s,children:r})}))),t}),{})}(l))}),[l]),Object(J.useEffect)((function(){localStorage.setItem("activeEmployers",JSON.stringify(h))}),[h]),i?Object(G.jsxs)("div",{className:"wrapper",children:[Object(G.jsx)("h1",{children:"Employees"}),Object(G.jsxs)("div",{className:"employers",children:[Object(G.jsx)("div",{className:"left-side",children:null===(e=Object.keys(m))||void 0===e?void 0:e.map((function(e){return Object(G.jsx)(I,{activeEmployers:l,setActiveEmployers:u,sortedActiveEmployees:h,letter:e,children:m[e].children},e)}))}),Object(G.jsxs)("div",{className:"right-side",children:[Object(G.jsx)("h2",{children:"Employers Birthday"}),!h||(null===(t=Object.keys(h))||void 0===t?void 0:t.length)<1&&Object(G.jsx)("h3",{children:" Employees List is empty"}),(null===(n=Object.keys(h))||void 0===n?void 0:n.length)>0&&(null===(c=Object.keys(h))||void 0===c?void 0:c.sort((function(e){var t=(new Date).getMonth()+1;return+e<=t?-1:+e>t?0:void 0})).map((function(e){var t=(new Date).setMonth(+e-1),n=h[e].children;return Object(G.jsxs)("div",{children:[Object(G.jsx)("h3",{children:new Date(t).toLocaleDateString("en-US",{month:"long"})}),n.map((function(e){var t=e.name,n=e.birthday;return Object(G.jsxs)("p",{children:[t," - ",new Date(n).toLocaleDateString("pt-PT")]})}))]},e)})))]})]})]}):Object(G.jsx)("div",{id:"page-loader",children:Object(G.jsx)("p",{children:"Page is loading"})})},F=(n(79),function(){return Object(G.jsxs)("div",{children:[Object(G.jsxs)("header",{children:[Object(G.jsx)(a.b,{to:"/",children:"Home"}),Object(G.jsx)(a.b,{to:"/employees",children:"Employees"})]}),Object(G.jsxs)("main",{children:[Object(G.jsx)(_.a,{exact:!0,path:"/",component:A}),Object(G.jsx)(_.a,{exact:!0,path:"/employees",component:B})]})]})}),H=function(){var e=Object(u.b)(Y);return{store:Y,persistor:e,runSaga:L.run(M)}}().store;c.render(Object(G.jsx)(D.a,{store:H,children:Object(G.jsx)(a.a,{children:Object(G.jsx)(F,{})})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.fa5dc35b.chunk.js.map